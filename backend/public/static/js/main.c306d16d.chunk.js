(this.webpackJsonpfire=this.webpackJsonpfire||[]).push([[0],{12:function(e,t,a){e.exports={container:"exportPage_container__1Upwz",projectBox:"exportPage_projectBox__3BX0a",sidebar:"exportPage_sidebar__KDNs_",new:"exportPage_new__1lsco",downlaod:"exportPage_downlaod__311wr",button:"exportPage_button__2Gv62",main:"exportPage_main__H891n",vbar:"exportPage_vbar__390C7",logo:"exportPage_logo__S34rS",btn:"exportPage_btn__34uP2",active:"exportPage_active__3kNFP",mediaList:"exportPage_mediaList__1Scke",card:"exportPage_card__9NnKe",imageProperties:"exportPage_imageProperties__3B9KT",process:"exportPage_process__128Tg",progressBar:"exportPage_progressBar__1ihTd",label:"exportPage_label__hYqyH",render:"exportPage_render__3Qroe",login:"exportPage_login__2T-_R"}},18:function(e,t,a){e.exports={container:"projects_container__2Mb-8",projectBox:"projects_projectBox__3Hv9U",boxShadow:"projects_boxShadow__1bISL",sidebar:"projects_sidebar__2ZHiN",popup:"projects_popup__wZLqi",popupClose:"projects_popupClose__nMx7_",popupContainer:"projects_popupContainer__1iLVs",new:"projects_new__2bUTB",downlaod:"projects_downlaod__1cI7M",button:"projects_button__7Im6G",main:"projects_main__2lXCM",vbar:"projects_vbar__Hw9Pb",logo:"projects_logo__2q2IB",btn:"projects_btn__3B-HD",active:"projects_active__3ghUc",login:"projects_login__1L6RV"}},20:function(e,t,a){e.exports={container:"controls_container__EozFA",trackbar:"controls_trackbar__NO5TT"}},21:function(e,t,a){e.exports={container:"actions_container__1vj3C",logo:"actions_logo__adcwE",popup:"actions_popup__2kxD3",popupContainer:"actions_popupContainer__1k_3M",popupClose:"actions_popupClose__nhZ8-"}},22:function(e,t,a){e.exports={container:"mediaPool_container__e0GsW",mediaList:"mediaPool_mediaList__2lN8x",hbox:"mediaPool_hbox__VhThN",addFiles:"mediaPool_addFiles__3XV1U",card:"mediaPool_card__1vZRe",img:"mediaPool_img__2XYkg",cardCaption:"mediaPool_cardCaption__3yPVL",title:"mediaPool_title__LN0XY",button:"mediaPool_button__386sM",loader:"mediaPool_loader__3AREg"}},25:function(e,t,a){e.exports={container:"login_container__3HpzL",logo:"login_logo__2o7Kj",button:"login_button__384LT",loginBox:"login_loginBox__1CDJO",google:"login_google__NyzaI",login:"login_login__3ajYI"}},3:function(e,t,a){e.exports={container:"properties_container__2vcQT",slideIn:"properties_slideIn__50cRV",title:"properties_title__18goP",keyframePrev:"properties_keyframePrev__3iYeC",keyframeNext:"properties_keyframeNext__1qCgv",keyframeBtn:"properties_keyframeBtn__2ImgD",tags:"properties_tags__3pjoS",effectBox:"properties_effectBox__UfJfw",inputBtn:"properties_inputBtn__yipHg",tag:"properties_tag__3pu_5",inputTag:"properties_inputTag__Az_Ww"}},37:function(e,t,a){e.exports={container:"mediaPlayer_container__2_F00",canvas:"mediaPlayer_canvas__1EgTq"}},50:function(e,t,a){e.exports={container:"editor_container__3cKHe"}},53:function(e,t,a){e.exports={container:"about_container__2evO6"}},60:function(e,t,a){},61:function(e,t,a){},9:function(e,t,a){e.exports={container:"timeline_container__34QPE",tracks:"timeline_tracks__30o8c",timebar:"timeline_timebar__3JhvD",time:"timeline_time__2uD2L",indicator:"timeline_indicator__831IR",pointer:"timeline_pointer__2Y3dD",track:"timeline_track__1iv85",card:"timeline_card__71JDV",fullCard:"timeline_fullCard__1yG4W",keyframeCard:"timeline_keyframeCard__d-5XW",keyframeBtn:"timeline_keyframeBtn__3pMDo",ruler:"timeline_ruler__3ys_-",s10:"timeline_s10__1Mh0X",sec:"timeline_sec__1W_d_",rulerCon:"timeline_rulerCon__hOz_1",move:"timeline_move__3Vpp6"}},90:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(26),i=a.n(c),s=(a(60),a(61),a(5)),o=a(4),l=a(7),u=a(6),d=a(11),j=a(13),m=function(e,t,a){return(t-e)*a+e},b=function(e,t){t-=e?e.start:0;for(var a=["x","y","scaleX","scaleY","trimLeft","trimRight","trimBottom","trimTop"],n=[],r=0,c=a;r<c.length;r++){var i,s,o=c[r];n.push({start:e&&null!==(i=e.keyframes[0][o])&&void 0!==i?i:0,startTime:0,end:e&&null!==(s=e.keyframes[0][o])&&void 0!==s?s:0,endTime:0})}if(e)for(var l=0;l<e.keyframes.length;l++){for(var u=e.keyframes[l],d=0;d<a.length;d++)void 0!==u[a[d]]&&(n[d].start=n[d].end,n[d].startTime=n[d].endTime,n[d].end=u[a[d]],n[d].endTime=u.start);if(u.start>t)break}for(var j,b,p,h={start:0},f=0;f<a.length;f++)h[a[f]]=m(n[f].start,n[f].end,(j=t,b=n[f].startTime,(p=n[f].endTime)===b?1:Math.min(Math.max((j-b)/(p-b),0),1)));return h},p=a(50),h=a.n(p),f=a(22),x=a.n(f),g=a(24),O=a(0),v={types:[{description:"Video file",accept:{"videos/*":[".mp4",".mov",".wmv",".avi",".flv"]}},{description:"Image file",accept:{"images/*":[".jpg",".png",".gif",".jpeg"]}}],multiple:!0,excludeAcceptAllOption:!0};function _(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),l=Object(s.a)(i,2),m=l[0],b=l[1],p=e.mediaList.map((function(t,a){return Object(O.jsx)(g.b,{draggableId:t.file.name,index:a,children:function(a){return Object(O.jsxs)("li",Object(o.a)(Object(o.a)(Object(o.a)({className:"".concat(x.a.card),ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{children:[Object(O.jsx)("img",{className:x.a.img,src:t.thumbnail,alt:t.file.name}),Object(O.jsx)("p",{className:x.a.cardCaption,children:t.file.name}),Object(O.jsx)("button",{className:x.a.button,onClick:function(){return e.deleteVideo(t)},children:Object(O.jsx)("span",{className:"material-icons",children:"delete"})})]}),t.file.name)}},t.file.name)})),h=function(){var t=Object(d.a)(Object(u.a)().mark((function t(){var a,n,r,i,s,o;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=[],t.next=4,window.showOpenFilePicker(v);case 4:n=t.sent,c("Loading..."),r=Object(j.a)(n),t.prev=7,r.s();case 9:if((i=r.n()).done){t.next=17;break}return s=i.value,t.next=13,s.getFile();case 13:o=t.sent,a.push(o);case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),r.e(t.t0);case 22:return t.prev=22,r.f(),t.finish(22);case 25:return t.next=27,e.addVideo(a);case 27:c(""),t.next=33;break;case 30:t.prev=30,t.t1=t.catch(0),console.log(t.t1);case 33:case"end":return t.stop()}}),t,null,[[0,30],[7,19,22,25]])})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(d.a)(Object(u.a)().mark((function t(a){var n,r,i,s,o;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),a.stopPropagation(),b(""),a.dataTransfer){t.next=5;break}return t.abrupt("return");case 5:for(n=[],r=0,i=Object.values(a.dataTransfer.items);r<i.length;r++)s=i[r],null!==(o=s.getAsFile())&&(o.type.includes("video/")||o.type.includes("image/"))?n.push(o):alert("Could not upload file: ".concat(null===o||void 0===o?void 0:o.name,". Only upload videos or images."));return t.next=9,e.addVideo(n);case 9:c("");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)("div",{onDragOver:function(e){e.stopPropagation(),e.preventDefault(),b("draggedOn")},onDragEnter:function(e){e.stopPropagation(),e.preventDefault(),b("draggedOn")},onDragLeave:function(e){e.stopPropagation(),e.preventDefault(),b("")},onDrop:f,className:"".concat(x.a.container," ").concat(m),children:[Object(O.jsxs)("div",{className:x.a.hbox,children:[Object(O.jsx)("h2",{className:x.a.title,children:"Project Files"}),Object(O.jsx)("button",{className:x.a.addFiles,onClick:h,title:"Add files",children:Object(O.jsx)("span",{className:"material-icons md-36",children:"add"})})]}),Object(O.jsx)("div",{className:x.a.mediaList,children:Object(O.jsx)(g.c,{droppableId:"card",children:function(e){return Object(O.jsxs)("ul",Object(o.a)(Object(o.a)({className:"card"},e.droppableProps),{},{ref:e.innerRef,children:[p,e.placeholder]}))}})}),Object(O.jsx)("p",{className:x.a.loader,children:r})]})}var k=a(20),N=a.n(k);function y(e){var t=e.playVideo,a=e.pauseVideo,n=e.isPlaying,r=e.currentTime,c=e.projectDuration,i=e.setCurrentTime,s=e.splitVideo,o=e.deleteSelectedSegment,l=e.setScaleFactor,u=e.scaleFactor;return Object(O.jsxs)("div",{className:N.a.container,children:[Object(O.jsx)("button",{className:N.a.button,children:Object(O.jsx)("span",{className:"material-icons",children:"skip_previous"})}),Object(O.jsx)("button",{className:N.a.button,onClick:function(){n?a():t()},title:n?"Pause":"Play",children:Object(O.jsx)("span",{className:"material-icons",children:n?"pause":"play_arrow"})}),Object(O.jsx)("button",{className:N.a.button,children:Object(O.jsx)("span",{className:"material-icons",children:"skip_next"})}),Object(O.jsx)("input",{className:N.a.trackbar,type:"range",min:"0",max:"1",step:.001,onChange:function(e){i(+e.target.value*c)},value:0===c?0:r/c}),Object(O.jsx)("button",{className:N.a.button,title:"Volume",children:Object(O.jsx)("span",{className:"material-icons",children:"volume_up"})}),Object(O.jsx)("button",{className:N.a.button,onClick:function(){l(Math.max(1e-4,.8*u))},title:"Zoom out",children:Object(O.jsx)("span",{className:"material-icons",children:"remove"})}),Object(O.jsx)("button",{className:N.a.button,onClick:function(){l(Math.min(1,1.2*u))},title:"Zoom In",children:Object(O.jsx)("span",{className:"material-icons",children:"add"})}),Object(O.jsx)("button",{className:N.a.button,onClick:function(){s(r)},title:"Split",children:Object(O.jsx)("span",{className:"material-icons",children:"content_cut"})}),Object(O.jsx)("button",{className:N.a.button,onClick:o,title:"Delete",children:Object(O.jsx)("span",{className:"material-icons",children:"delete"})}),Object(O.jsx)("button",{className:N.a.button,title:"Duplicate",children:Object(O.jsx)("span",{className:"material-icons",children:"content_copy"})})]})}var T=a(37),L=a.n(T);function R(e){var t=e.canvasRef,a=e.projectWidth,r=e.projectHeight,c=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e;t.classList.add(L.a.canvas),t.style.aspectRatio="".concat(a/r),null===(e=c.current)||void 0===e||e.appendChild(t)}),[]),Object(O.jsx)("div",{className:L.a.container,ref:c})}var P=a(21),C=a.n(P),S=a(8),B=a(10),E=a(31),w=a.n(E),M=a(52),F=a.n(M).a.create({baseURL:"/api/v1"});F.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(sessionStorage.getItem("token")),e}),(function(e){return Promise.reject(e)}));var D=F;function I(e){var t=Object(S.g)(),a=Object(n.useState)("down"),r=Object(s.a)(a,2),c=r[0],i=r[1],o="rgb(51, 51, 51)",l="saving your project...";return"loading"===c?(o="rgb(51, 51, 51)",l="saving your project..."):"success"===c?(o="rgb(0, 153, 51)",l="Project saved successfully!"):(o="rgb(204, 0, 0)",l=c),Object(O.jsxs)("div",{className:C.a.container,children:[Object(O.jsx)("div",{className:C.a.popup,children:Object(O.jsxs)("div",{className:C.a.popupContainer,style:{display:"down"===c?"none":"block",backgroundColor:"".concat(o)},children:[Object(O.jsx)("button",{className:C.a.popupClose,onClick:function(){i("down")},children:Object(O.jsx)("span",{className:"material-icons",children:"close"})}),l]})}),Object(O.jsx)(B.b,{to:"/projects",children:Object(O.jsx)("button",{className:C.a.button,children:Object(O.jsx)("img",{className:C.a.logo,src:"/logo192.png"})})}),Object(O.jsx)(E.GoogleLogout,{clientId:"1010611727033-t5uiv067a9db9j900i9lnpqi3jncmtlt.apps.googleusercontent.com",render:function(e){return Object(O.jsx)("button",{className:C.a.button,title:"Logout",onClick:e.onClick,disabled:e.disabled,children:Object(O.jsx)("span",{className:"material-icons",children:"logout"})})},buttonText:"Logout",onLogoutSuccess:function(){e.setProjectUser(""),sessionStorage.removeItem("token"),t.push("/")}}),Object(O.jsx)(B.b,{to:"/export",children:Object(O.jsx)("button",{className:C.a.button,title:"Export",children:Object(O.jsx)("span",{className:"material-icons",children:"save_alt"})})}),Object(O.jsx)("button",{className:C.a.button,title:"Save",onClick:function(){i("loading");var t={projectId:e.projectId,projectUser:e.projectUser,mediaList:e.mediaList,trackList:e.trackList};D.put("/saveProject",t).then((function(e){200===e.status?(i("success"),console.log(e.data.success)):(i(e.data.error),console.log(e.data.error))}))},children:Object(O.jsx)("span",{className:"material-icons",children:"save"})}),Object(O.jsx)("button",{className:C.a.button,onClick:function(){return t.push("/about")},title:"About",children:Object(O.jsx)("span",{className:"material-icons",children:"help_outline"})}),Object(O.jsx)("button",{className:C.a.button,children:Object(O.jsx)("span",{className:"material-icons",children:"tonality"})})]})}var U=a(9),A=a.n(U);function X(e){var t,a=e.trackList,r=e.projectDuration,c=e.selectedSegment,i=e.setSelectedSegment,l=e.currentTime,u=e.setCurrentTime,d=e.updateSegment,j=e.scaleFactor,b=e.setTrackList;!function(e){e[e.NONE=0]="NONE",e[e.MOVE=1]="MOVE",e[e.TRIM_LEFT=2]="TRIM_LEFT",e[e.TRIM_RIGHT=3]="TRIM_RIGHT"}(t||(t={}));var p=[[255,0,0],[82,0,255],[0,255,15],[234,0,255],[25,0,255],[255,231,0]],h=Object(n.useRef)(0),f=Object(n.useRef)(null),x=Object(n.useState)([]),v=Object(s.a)(x,2),_=v[0],k=v[1],N=Object(n.useRef)(0),y=Object(n.useRef)(-1),T=Object(n.useRef)(t.NONE),L=function(e){var t=parseFloat((e/1e3).toFixed(2)),a=Math.floor(t/60),n=Math.floor(t/1)-60*a,r=100*(t-Math.floor(t/1));n+=Math.floor(r/30),r-=30*Math.floor(r/30);for(var c=String(a);c.length<2;)c="0"+c;for(var i=String(n);i.length<2;)i="0"+i;for(var s=r.toFixed(0);s.length<2;)s="0"+s;return c+":"+i+":"+s},R=function(){if(f.current){for(var e=[],t=Math.max(f.current.clientWidth/j,r),a=Math.floor(t*j/100),n=function(n){var r=t/a*n;e.push(Object(O.jsxs)("div",{className:A.a.s10,style:{flex:"0 0 ".concat(t/a*j,"px")},onClick:function(e){e.stopPropagation(),u(m(r,t/a*(n+1),e.nativeEvent.offsetX/(t/a*j)))},children:[Object(O.jsx)("p",{className:A.a.time,children:L(r)}),Object(O.jsx)("div",{className:A.a.sec}),Object(O.jsx)("div",{className:A.a.sec}),Object(O.jsx)("div",{className:A.a.sec}),Object(O.jsx)("div",{className:A.a.sec}),Object(O.jsx)("div",{className:A.a.sec}),0===n?Object(O.jsx)("div",{className:A.a.sec,style:{height:14}}):""]},r))},c=0;c<a;c++)n(c);return Object(O.jsx)("div",{className:"".concat(A.a.track," ").concat(A.a.ruler),children:e})}},P=function(e){null!==f.current&&-1===y.current&&(e.stopPropagation(),e.preventDefault(),e.nativeEvent.offsetX<10?S(t.TRIM_LEFT):e.nativeEvent.offsetX>e.nativeEvent.target.clientWidth-10?S(t.TRIM_RIGHT):S(t.MOVE))},C=function(e,n){for(var r=[],s=function(s){var o=e[s],l=p[s%p.length],d=null!==c&&c.track===n&&c.index===s,m=o.start-(0===s?0:e[s-1].start+e[s-1].duration);r.push(Object(O.jsx)("div",{style:{flex:"0 0 ".concat(m*j,"px")}})),r.push(Object(O.jsxs)("div",{className:"".concat(A.a.fullCard),style:{flex:"0 0 ".concat(o.duration*j-4,"px")},onClick:function(e){e.stopPropagation()},children:[Object(O.jsx)("div",{className:"".concat(A.a.card),style:{backgroundImage:"url(".concat(o.media.thumbnail,")"),backgroundSize:"auto 100%",backgroundColor:"rgb(".concat(l[0],", ").concat(l[1],", ").concat(l[2],")"),border:"2px solid rgb(".concat(d?l[0]:.5*l[0],", ").concat(d?l[2]:.5*l[2],", ").concat(d?l[2]:.5*l[2],")"),borderRadius:"2px",boxShadow:d?"rgb(".concat(l[0],", ").concat(l[1],", ").concat(l[2],", 0.5) 0px 0px 10px"):"",height:"56px"},onMouseDown:function(e){null!==f.current&&0===e.button&&(e.stopPropagation(),i({track:n,index:s}),y.current=(e.nativeEvent.clientX-f.current.getBoundingClientRect().left+f.current.scrollLeft)/j,N.current=y.current-a[n][s].start,P(e))},onMouseMove:P,onMouseLeave:function(){-1===y.current&&S(t.NONE)}}),d?Object(O.jsx)("div",{className:"".concat(A.a.keyframeCard),children:o.keyframes.map((function(e){return o.keyframes.length>1?Object(O.jsx)("button",{style:{transform:"translateX(".concat(e.start*j,"px) rotate(45deg)")},className:A.a.keyframeBtn,onClick:function(t){t.stopPropagation(),u(o.start+e.start)},onDoubleClick:function(e){e.stopPropagation()}}):""}))}):""]}))},o=0;o<e.length;o++)s(o);return r};Object(n.useEffect)((function(){k(a.map((function(e,t){return Object(O.jsx)("div",{className:A.a.track,children:C(e,t)})})))}),[a,c,j]),Object(n.useEffect)((function(){var e=function(e){0===e.button&&-1!==y.current&&(e.stopPropagation(),e.preventDefault(),S(t.NONE),y.current=-1)};return document.addEventListener("mouseup",e),function(){document.removeEventListener("mouseup",e)}}),[]);var S=function(e){T.current=e,e===t.MOVE?document.body.style.cursor="move":e===t.TRIM_LEFT||e===t.TRIM_RIGHT?document.body.style.cursor="ew-resize":document.body.style.cursor=""},B=function(e,t,a){return Math.max(t,Math.min(a,e))};return Object(O.jsx)("div",{className:A.a.container,onClick:function(){return i(null)},onMouseMove:function(e){e.stopPropagation(),e.preventDefault(),-1!==y.current&&0===h.current&&(h.current=setTimeout((function(){!function(e){if(h.current=0,null!==c&&null!==f.current&&-1!==y.current){var n=a[c.track][c.index],r=(e.nativeEvent.clientX-f.current.getBoundingClientRect().left+f.current.scrollLeft)/j,s=r-y.current;y.current=r;var l=e.nativeEvent.clientY-f.current.getBoundingClientRect().top+f.current.scrollTop,u=Math.max(Math.floor((l-40)/81),0);if(T.current===t.MOVE){u>=a.length-1&&(a.push([]),u=a.length-2);for(var m=Math.max(r-N.current,0),p=1/0,x=0,g=0,O=0;O<a[u].length+1;O++)if(c.track!==u||c.index!==O){if(g=O<a[u].length?a[u][O].start:1/0,n.duration<=g-x){if(m>=x&&m+n.duration<g){p=m;break}var v=m<x?x:g-n.duration;Math.abs(m-v)<Math.abs(m-p)&&(p=v)}O<a[u].length&&(x=a[u][O].start+a[u][O].duration)}if(u!==c.track&&!n.media.sources.find((function(e){return e.track===u}))){var _=n.media.sources[0].element.cloneNode();_.pause(),n.media.sources.push({track:u,element:_,inUse:!1})}for(var k=Object(o.a)(Object(o.a)({},n),{},{start:p}),L=-1,R=[],P=0;P<a.length;P++){for(var C=[],S=0;S<a[P].length;S++)P===c.track&&S===c.index||(P===u&&-1===L&&a[P][S].start>p&&(C.push(k),L=C.length-1),C.push(a[P][S]));P===u&&-1===L&&(C.push(k),L=C.length-1),R.push(C)}for(;R.length>0&&0===R[R.length-1].length;)R.pop();R.push([]),b(R),i({track:u,index:L})}else T.current===t.TRIM_LEFT?(s=B(s,-n.mediaStart,Math.min(1e3*n.media.sources[0].element.duration-n.mediaStart,n.duration)),c.index>0&&(s=Math.max(s,-n.start+a[c.track][c.index-1].start+a[c.track][c.index-1].duration)),d(c,Object(o.a)(Object(o.a)({},n),{},{start:n.start+s,mediaStart:n.mediaStart+s,duration:n.duration-s}))):T.current===t.TRIM_RIGHT&&(s=B(s,-n.duration,1e3*n.media.sources[0].element.duration-n.mediaStart-n.duration),c.index<a[c.track].length-1&&(s=Math.min(s,a[c.track][c.index+1].start-n.start-n.duration)),d(c,Object(o.a)(Object(o.a)({},n),{},{duration:n.duration+s})))}}(e)}),16))},ref:f,children:Object(O.jsx)(g.c,{droppableId:"timeline",children:function(e){var t;return Object(O.jsxs)("div",Object(o.a)(Object(o.a)({className:"timeline"},e.droppableProps),{},{ref:e.innerRef,children:[Object(O.jsxs)("div",{className:A.a.tracks,style:{minWidth:"".concat(r*j,"px"),minHeight:"".concat(null===(t=f.current)||void 0===t?void 0:t.clientHeight,"px")},children:[R(),Object(O.jsxs)("div",{style:{transform:"translateX(".concat(l*j,"px)")},className:A.a.pointer,children:[Object(O.jsx)("div",{className:A.a.highlight}),Object(O.jsx)("div",{className:A.a.indicator})]}),_]}),e.placeholder]}))}})})}var V=a(3),Y=a.n(V);function H(e){var t=e.trackList,a=e.selectedSegment,r=e.updateSegment,c=e.currentTime,i=e.setCurrentTime,u=a?t[a.track][a.index]:null,d=b(u,c),j=Object(n.useState)(!1),m=Object(s.a)(j,2),p=m[0],h=m[1],f=Object(n.useState)(!1),x=Object(s.a)(f,2),g=x[0],v=x[1],_=Object(n.useState)(!1),k=Object(s.a)(_,2),N=k[0],y=k[1],T=function(){if(!u)return!1;for(var e=0;e<u.keyframes.length;e++)if(u.keyframes[e].start+u.start===c)return e;return!1},L=function(e){var t=T();if(!1===t)return!1;if(!u)return!1;if("position"===e){if(void 0!==u.keyframes[t].x||void 0!==u.keyframes[t].y)return!0}else if("scale"===e){if(void 0!==u.keyframes[t].scaleX||void 0!==u.keyframes[t].scaleY)return!0}else if("crop"===e&&(void 0!==u.keyframes[t].trimBottom||void 0!==u.keyframes[t].trimTop||void 0!==u.keyframes[t].trimLeft||void 0!==u.keyframes[t].trimRight))return!0;return!1};Object(n.useEffect)((function(){h(L("position")),v(L("crop")),y(L("scale"))}),[c]);var R=function(e,t,n){if(!u||!a)return!1;for(var i=null,d=0;d<u.keyframes.length;d++)if(u.keyframes[d].start+u.start>=c){i=d;break}null===i&&(i=u.keyframes.length);var j=T();if(1===u.keyframes.length&&void 0===n&&(j=0),u.keyframes.length>1&&"position"===t?h(!0):u.keyframes.length>1&&"scale"===t?y(!0):u.keyframes.length>1&&"crop"===t&&v(!0),!1!==j){for(var m=Object(o.a)(Object(o.a)({},u.keyframes[j]),e),b=!0,p=0,f=Object.entries(m);p<f.length;p++){var x=Object(s.a)(f[p],2),g=x[0],O=x[1];if("start"!==g&&void 0!==O){b=!1;break}}r(a,b?Object(o.a)(Object(o.a)({},u),{},{keyframes:[].concat(Object(l.a)(u.keyframes.slice(0,j)),Object(l.a)(u.keyframes.slice(j+1)))}):Object(o.a)(Object(o.a)({},u),{},{keyframes:[].concat(Object(l.a)(u.keyframes.slice(0,j)),[m],Object(l.a)(u.keyframes.slice(j+1)))}))}else r(a,Object(o.a)(Object(o.a)({},u),{},{keyframes:[].concat(Object(l.a)(u.keyframes.slice(0,i)),[{start:c-u.start,x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY,trimLeft:e.trimLeft,trimRight:e.trimRight,trimTop:e.trimTop,trimBottom:e.trimBottom}],Object(l.a)(u.keyframes.slice(i)))}))},P=function(e){if(!u)return null;for(var t=0;t<u.keyframes.length;t++)if(u.start+u.keyframes[t].start>c)if("position"===e){if(void 0!==u.keyframes[t].x||void 0!==u.keyframes[t].y)return t}else if("scale"===e){if(void 0!==u.keyframes[t].scaleX||void 0!==u.keyframes[t].scaleY)return t}else if("crop"===e&&(void 0!==u.keyframes[t].trimBottom||void 0!==u.keyframes[t].trimTop||void 0!==u.keyframes[t].trimLeft||void 0!==u.keyframes[t].trimRight))return t;return null},C=function(e){if(!u)return null;for(var t=u.keyframes.length-1;t>=0;t--)if(u.start+u.keyframes[t].start<c)if("position"===e){if(void 0!==u.keyframes[t].x||void 0!==u.keyframes[t].y)return t}else if("scale"===e){if(void 0!==u.keyframes[t].scaleX||void 0!==u.keyframes[t].scaleY)return t}else if("crop"===e&&(void 0!==u.keyframes[t].trimBottom||void 0!==u.keyframes[t].trimTop||void 0!==u.keyframes[t].trimLeft||void 0!==u.keyframes[t].trimRight))return t;return null};return Object(O.jsxs)("fieldset",{className:"".concat(Y.a.container," ").concat(a?Y.a.slideIn:""),disabled:null===a,children:[Object(O.jsx)("h2",{className:Y.a.title,children:"Effects"}),Object(O.jsxs)("label",{className:Y.a.tags,children:["Position",Object(O.jsx)("button",{className:Y.a.keyframeNext,onClick:function(){if(u){var e=P("position");i(null==e?c:u.start+u.keyframes[e].start)}},children:Object(O.jsx)("span",{className:"material-icons",children:"keyboard_arrow_right"})}),Object(O.jsx)("button",{className:Y.a.keyframeBtn,onClick:function(e){e.stopPropagation(),0!==c&&(R(p?{x:void 0,y:void 0}:{x:d.x,y:d.y},void 0,!0),h(!p))},children:Object(O.jsx)("span",{className:"material-icons",style:{color:p?"red":"rgb(102, 102, 102)"},children:"circle"})}),Object(O.jsx)("button",{className:Y.a.keyframePrev,onClick:function(){if(u){var e=C("position");i(null==e?c:u.start+u.keyframes[e].start)}},children:Object(O.jsx)("span",{className:"material-icons",children:"keyboard_arrow_left"})})]}),Object(O.jsxs)("span",{className:Y.a.effectBox,children:[Object(O.jsx)("label",{className:Y.a.tag,children:"X "}),Object(O.jsxs)("div",{className:Y.a.inputTagBox,children:[Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({x:(null!==(e=d.x)&&void 0!==e?e:0)-10},"position")},children:"-"}),Object(O.jsx)("input",{name:"X",className:Y.a.inputTag,type:"number",step:"10",onChange:function(e){return R({x:+e.target.value},"position")},value:d.x}),Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({x:(null!==(e=d.x)&&void 0!==e?e:0)+10},"position")},children:"+"})]})]}),Object(O.jsxs)("span",{className:Y.a.effectBox,children:[Object(O.jsx)("label",{className:Y.a.tag,children:"Y "}),Object(O.jsxs)("div",{className:Y.a.inputTagBox,children:[Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({y:(null!==(e=d.y)&&void 0!==e?e:0)-10},"position")},children:"-"}),Object(O.jsx)("input",{name:"Y",className:Y.a.inputTag,type:"number",step:"10",onChange:function(e){return R({y:+e.target.value},"position")},value:d.y}),Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({y:(null!==(e=d.y)&&void 0!==e?e:0)+10},"position")},children:"+"})]})]}),Object(O.jsxs)("label",{className:Y.a.tags,children:["Scale",Object(O.jsx)("button",{className:Y.a.keyframeNext,onClick:function(){if(u){var e=P("scale");i(null==e?c:u.start+u.keyframes[e].start)}},children:Object(O.jsx)("span",{className:"material-icons",children:"keyboard_arrow_right"})}),Object(O.jsx)("button",{className:Y.a.keyframeBtn,onClick:function(e){e.stopPropagation(),0!==c&&(N?(y(!N),R({scaleX:void 0,scaleY:void 0},void 0,!0)):(y(!N),R({scaleX:d.scaleX,scaleY:d.scaleY},void 0,!0)))},children:Object(O.jsx)("span",{className:"material-icons",style:{color:N?"red":"rgb(102, 102, 102)"},children:"circle"})}),Object(O.jsx)("button",{className:Y.a.keyframePrev,onClick:function(){if(u){var e=C("scale");i(null==e?c:u.start+u.keyframes[e].start)}},children:Object(O.jsx)("span",{className:"material-icons",children:"keyboard_arrow_left"})})]}),Object(O.jsxs)("span",{className:Y.a.effectBox,children:[Object(O.jsx)("label",{className:Y.a.tag,children:"X "}),Object(O.jsxs)("div",{className:Y.a.inputTagBox,children:[Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({scaleX:Math.max(+((null!==(e=d.scaleX)&&void 0!==e?e:0)-.1).toFixed(2),0)},"scale")},children:"-"}),Object(O.jsx)("input",{name:"height",className:Y.a.inputTag,type:"number",step:"0.1",min:"0.0",onChange:function(e){return R({scaleX:+e.target.value},"scale")},value:d.scaleX}),Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({scaleX:+((null!==(e=d.scaleX)&&void 0!==e?e:0)+.1).toFixed(2)},"scale")},children:"+"})]})]}),Object(O.jsxs)("span",{className:Y.a.effectBox,children:[Object(O.jsx)("label",{className:Y.a.tag,children:"Y "}),Object(O.jsxs)("div",{className:Y.a.inputTagBox,children:[Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({scaleY:Math.max(+((null!==(e=d.scaleY)&&void 0!==e?e:0)-.1).toFixed(2),0)},"scale")},children:"-"}),Object(O.jsx)("input",{name:"width",className:Y.a.inputTag,type:"number",step:"0.1",min:"0.0",onChange:function(e){return R({scaleY:+e.target.value},"scale")},value:d.scaleY}),Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({scaleY:+((null!==(e=d.scaleY)&&void 0!==e?e:0)+.1).toFixed(2)},"scale")},children:"+"})]})]}),Object(O.jsxs)("label",{className:Y.a.tags,children:["Crop",Object(O.jsx)("button",{className:Y.a.keyframeNext,onClick:function(){if(u){var e=P("crop");i(null==e?c:u.start+u.keyframes[e].start)}},children:Object(O.jsx)("span",{className:"material-icons",children:"keyboard_arrow_right"})}),Object(O.jsx)("button",{className:Y.a.keyframeBtn,onClick:function(e){e.stopPropagation(),0!==c&&(R(g?{trimLeft:void 0,trimRight:void 0,trimTop:void 0,trimBottom:void 0}:{trimLeft:d.trimLeft,trimRight:d.trimRight,trimTop:d.trimTop,trimBottom:d.trimBottom},void 0,!0),v(!g))},children:Object(O.jsx)("span",{className:"material-icons",style:{color:g?"red":"rgb(102, 102, 102)"},children:"circle"})}),Object(O.jsx)("button",{className:Y.a.keyframePrev,onClick:function(){if(u){var e=C("crop");i(null==e?c:u.start+u.keyframes[e].start)}},children:Object(O.jsx)("span",{className:"material-icons",children:"keyboard_arrow_left"})})]}),Object(O.jsxs)("span",{className:Y.a.effectBox,children:[Object(O.jsx)("label",{className:Y.a.tag,children:"Left"}),Object(O.jsxs)("div",{className:Y.a.inputTagBox,children:[Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({trimLeft:Math.max(+((null!==(e=d.trimLeft)&&void 0!==e?e:0)-.1).toFixed(2),0)},"crop")},children:"-"}),Object(O.jsx)("input",{name:"Left",className:Y.a.inputTag,type:"number",step:"0.1",min:"0",max:"1.0",onChange:function(e){return R({trimLeft:+e.target.value},"crop")},value:d.trimLeft}),Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({trimLeft:Math.min(+((null!==(e=d.trimLeft)&&void 0!==e?e:0)+.1).toFixed(2),1)},"crop")},children:"+"})]})]}),Object(O.jsxs)("span",{className:Y.a.effectBox,children:[Object(O.jsx)("label",{className:Y.a.tag,children:"Right"}),Object(O.jsxs)("div",{className:Y.a.inputTagBox,children:[Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({trimRight:Math.max(+((null!==(e=d.trimRight)&&void 0!==e?e:0)-.1).toFixed(2),0)},"crop")},children:"-"}),Object(O.jsx)("input",{name:"Right",className:Y.a.inputTag,type:"number",step:"0.1",min:"0",max:"1.0",onChange:function(e){return R({trimRight:+e.target.value},"crop")},value:d.trimRight}),Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({trimRight:Math.min(+((null!==(e=d.trimRight)&&void 0!==e?e:0)+.1).toFixed(2),1)},"crop")},children:"+"})]})]}),Object(O.jsxs)("span",{className:Y.a.effectBox,children:[Object(O.jsx)("label",{className:Y.a.tag,children:"Top"}),Object(O.jsxs)("div",{className:Y.a.inputTagBox,children:[Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({trimTop:Math.max(+((null!==(e=d.trimTop)&&void 0!==e?e:0)-.1).toFixed(2),0)},"crop")},children:"-"}),Object(O.jsx)("input",{name:"Top",className:Y.a.inputTag,type:"number",step:"0.1",min:"0",max:"1.0",onChange:function(e){return R({trimTop:+e.target.value})},value:d.trimTop}),Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({trimTop:Math.min(+((null!==(e=d.trimTop)&&void 0!==e?e:0)+.1).toFixed(2),1)},"crop")},children:"+"})]})]}),Object(O.jsxs)("span",{className:Y.a.effectBox,children:[Object(O.jsx)("label",{className:Y.a.tag,children:"Bottom"}),Object(O.jsxs)("div",{className:Y.a.inputTagBox,children:[Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({trimBottom:Math.max(+((null!==(e=d.trimBottom)&&void 0!==e?e:0)-.1).toFixed(2),0)},"crop")},children:"-"}),Object(O.jsx)("input",{name:"Bottom",className:Y.a.inputTag,type:"number",step:"0.1",min:"0",max:"1.0",onChange:function(e){return R({trimBottom:+e.target.value})},value:d.trimBottom}),Object(O.jsx)("button",{className:Y.a.inputBtn,onClick:function(){var e;return R({trimBottom:Math.min(+((null!==(e=d.trimBottom)&&void 0!==e?e:0)+.1).toFixed(2),1)},"crop")},children:"+"})]})]})]})}function W(e){var t=Object(n.useState)(.1),a=Object(s.a)(t,2),r=a[0],c=a[1];return Object(O.jsx)(g.a,{onDragEnd:function(t){if(t.destination){var a=t.source,n=t.destination;if(a.droppableId===n.droppableId){var r=e.mediaList.slice(),c=r.splice(t.source.index,1),i=Object(s.a)(c,1)[0];r.splice(t.destination.index,0,i),e.setMediaList(r)}else{e.dragAndDrop(e.mediaList[t.source.index]);var o=e.mediaList.slice();e.setMediaList(o)}}},children:Object(O.jsxs)("div",{className:h.a.container,children:[Object(O.jsx)(_,{mediaList:e.mediaList,setMediaList:e.setMediaList,addVideo:e.addVideo,deleteVideo:e.deleteVideo,dragAndDrop:e.dragAndDrop,projectDuration:e.projectDuration}),Object(O.jsx)(R,{canvasRef:e.canvasRef,projectWidth:e.projectWidth,projectHeight:e.projectHeight}),Object(O.jsx)(y,{playVideo:e.playVideo,pauseVideo:e.pauseVideo,isPlaying:e.isPlaying,currentTime:e.currentTime,projectDuration:e.projectDuration,setCurrentTime:e.setCurrentTime,deleteSelectedSegment:e.deleteSelectedSegment,splitVideo:e.splitVideo,setScaleFactor:c,scaleFactor:r}),Object(O.jsx)(H,{trackList:e.trackList,selectedSegment:e.selectedSegment,currentTime:e.currentTime,setCurrentTime:e.setCurrentTime,updateSegment:e.updateSegment}),Object(O.jsx)(X,{trackList:e.trackList,projectDuration:e.projectDuration,selectedSegment:e.selectedSegment,setSelectedSegment:e.setSelectedSegment,currentTime:e.currentTime,setCurrentTime:e.setCurrentTime,updateSegment:e.updateSegment,scaleFactor:r,setTrackList:e.setTrackList}),Object(O.jsx)(I,{projectId:e.projectId,projectUser:e.projectUser,mediaList:e.mediaList,trackList:e.trackList,setProjectUser:e.setProjectUser})]})})}var G=a(53),q=a.n(G);function z(){return Object(O.jsxs)("div",{className:q.a.container,children:[Object(O.jsx)(B.b,{to:"/",children:Object(O.jsx)("span",{className:"material-icons",children:"arrow_back"})}),Object(O.jsx)("h1",{children:"About Us"}),Object(O.jsx)("p",{children:"We are a group of developers passionate to bring the best products to consumers."}),Object(O.jsx)("p",{children:"We are constantly testing our products for bugs and issues"}),Object(O.jsx)("p",{children:"If you come accross any such bug or just want to give feedback to our team don't hesisate to contact us"}),Object(O.jsx)("br",{}),Object(O.jsx)("address",{children:Object(O.jsxs)("p",{children:["Email Address:",Object(O.jsx)("a",{href:"mailto:react.editor@gmail.com",children:"react.editor@gmail.com"})]})}),Object(O.jsx)("p",{children:"Version 0.1"})]})}var J=a(12),K=a.n(J);function Z(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),r=a[0],c=a[1];function i(){if(e.trackList.length>1){for(var t,a=0;a<e.trackList.length;a++)e.trackList[a].length>0&&(t=e.trackList[a][0]);return c(0),e.isRecordingRef.current&&c(Math.round(100*e.currentTime/e.projectDuration)),Object(O.jsx)("div",{className:K.a.mediaList,children:Object(O.jsx)("ul",{className:K.a.card,children:Object(O.jsxs)("li",{children:[Object(O.jsx)("div",{style:{backgroundImage:"url(".concat(t.media.thumbnail,")")},className:K.a.imageProperties}),Object(O.jsx)("h3",{children:"Untitled"}),Object(O.jsxs)("div",{className:K.a.process,children:[Object(O.jsx)("label",{className:K.a.render,children:"Rendering Progress"}),Object(O.jsx)("progress",{max:"100",value:r,className:K.a.progressBar}),Object(O.jsxs)("label",{className:K.a.label,children:[r,"%"]})]})]})})})}return Object(O.jsx)("div",{children:"No project to export"})}return Object(O.jsxs)("div",{className:K.a.container,children:[Object(O.jsxs)("div",{className:K.a.sidebar,children:[Object(O.jsxs)("div",{className:K.a.vbar,children:[Object(O.jsx)(B.b,{to:"/",children:Object(O.jsx)("img",{className:K.a.logo,src:"/logo192.png"})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Fire"}),Object(O.jsx)("p",{children:"Video Editor"})]})]}),Object(O.jsxs)(B.b,{to:"/projects",className:K.a.btn,children:[Object(O.jsx)("span",{className:"material-icons",children:"layers"})," Current Projects"]}),Object(O.jsxs)(B.b,{to:"/export",className:K.a.active,children:[Object(O.jsx)("span",{className:"material-icons",children:"save_alt"})," Exported Files"]})]}),Object(O.jsx)("button",{className:K.a.downlaod,children:Object(O.jsx)("span",{className:"material-icons",onClick:e.Render,children:"save_alt"})}),Object(O.jsx)("div",{className:K.a.main,children:Object(O.jsx)(i,{})})]})}var Q=a(25),$=a.n(Q),ee=a(39);function te(e){return Object(n.useEffect)((function(){ee.a.load("client:auth2",(function(){ee.a.client.init({clientId:"1010611727033-t5uiv067a9db9j900i9lnpqi3jncmtlt.apps.googleusercontent.com",scope:""})}))})),Object(O.jsxs)("div",{className:$.a.container,children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{className:$.a.login,children:Object(O.jsxs)("div",{className:$.a.loginBox,children:[Object(O.jsx)(B.b,{to:"/",children:Object(O.jsx)("img",{className:$.a.logo,src:"/logo192.png"})}),Object(O.jsx)(w.a,{clientId:"1010611727033-t5uiv067a9db9j900i9lnpqi3jncmtlt.apps.googleusercontent.com",render:function(e){return Object(O.jsxs)("button",{className:$.a.button,onClick:e.onClick,disabled:e.disabled,title:"Sign in with Google",children:[Object(O.jsx)("img",{className:$.a.google,src:"/google.svg"}),"Sign in with Google"]})},buttonText:"Login",onSuccess:function(t){sessionStorage.setItem("token",t.tokenId),D.get("/getEmail").then((function(t){e.setProjectUser(t.data.email)}))},onFailure:function(e){console.log(e),console.log("Login process terminated")},cookiePolicy:"single_host_origin"})]})})]})}var ae=a(18),ne=a.n(ae);function re(e){var t=Object(S.g)();function a(t){if(t.preventDefault(),i)if(""!==i._id){D.put("/editProject",i).then((function(){u(null)}));var a,n=[],r=Object(j.a)(e.projects);try{for(r.s();!(a=r.n()).done;){var c=a.value;c._id===i._id?n.push(i):n.push(c)}}catch(s){r.e(s)}finally{r.f()}e.setProjects(n)}else D.put("/addProject",i).then((function(t){e.setProjects([].concat(Object(l.a)(e.projects),[t.data])),u(null)}))}var r=Object(n.useState)(null),c=Object(s.a)(r,2),i=c[0],u=c[1];return Object(O.jsxs)("div",{className:ne.a.container,children:[Object(O.jsxs)("div",{className:ne.a.sidebar,children:[Object(O.jsxs)("div",{className:ne.a.vbar,children:[Object(O.jsx)(B.b,{to:"/",children:Object(O.jsx)("img",{className:ne.a.logo,src:"/logo192.png"})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Fire"}),Object(O.jsx)("p",{children:"Video Editor"})]})]}),Object(O.jsxs)(B.b,{to:"/projects",className:ne.a.active,children:[Object(O.jsx)("span",{className:"material-icons",children:"layers"})," Current Projects"]}),Object(O.jsxs)(B.b,{to:"/export",className:ne.a.btn,children:[Object(O.jsx)("span",{className:"material-icons",children:"save_alt"})," Exported Files"]})]}),Object(O.jsxs)("div",{className:ne.a.main,children:[e.projects.map((function(a,n){return Object(O.jsx)("div",{className:ne.a.projectBox,style:{backgroundImage:"url()"},onClick:function(){t.push("/editor")},children:Object(O.jsxs)("div",{className:ne.a.boxShadow,children:[Object(O.jsx)("h2",{children:a.name}),Object(O.jsx)("button",{onClick:function(e){e.stopPropagation(),u(Object(o.a)({},a))},children:Object(O.jsx)("span",{className:"material-icons",children:"mode"})}),Object(O.jsx)("button",{onClick:function(t){var n;t.stopPropagation(),n=a._id,D.delete("/deleteProject/".concat(n)).then((function(){e.setProjects(e.projects.filter((function(e){return e._id!==n})))}))},children:Object(O.jsx)("span",{className:"material-icons",children:"delete"})})]})})})),null!=i?function(){if(i)return Object(O.jsx)("div",{className:ne.a.popup,children:Object(O.jsxs)("div",{id:"project",className:ne.a.popupContainer,children:[Object(O.jsxs)("h2",{children:[""===i._id?"Create":"Modify"," Project "]}),Object(O.jsx)("button",{className:ne.a.popupClose,onClick:function(){u(null)},children:Object(O.jsx)("span",{className:"material-icons",children:"close"})}),Object(O.jsxs)("form",{onSubmit:a,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Name: "}),Object(O.jsx)("input",{type:"text",id:"title",name:"title",required:!0,value:i.name,onChange:function(e){u(Object(o.a)(Object(o.a)({},i),{},{name:e.target.value}))}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Framerate: "}),Object(O.jsx)("input",{type:"number",id:"frame",name:"frame",min:"1",required:!0,value:i.framerate,onChange:function(e){u(Object(o.a)(Object(o.a)({},i),{},{framerate:+e.target.value}))}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Width: "}),Object(O.jsx)("input",{type:"number",id:"width",name:"width",min:"1",required:!0,value:i.width,onChange:function(e){u(Object(o.a)(Object(o.a)({},i),{},{width:+e.target.value}))}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Height: "}),Object(O.jsx)("input",{type:"number",id:"height",name:"height",min:"1",required:!0,value:i.height,onChange:function(e){u(Object(o.a)(Object(o.a)({},i),{},{height:+e.target.value}))}})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{type:"submit",children:Object(O.jsx)("span",{className:"material-icons",children:"send"})})})]})]})})}():null]}),Object(O.jsx)("button",{className:ne.a.new,onClick:function(){return u({_id:"",name:"",width:1920,height:1080,framerate:30,duration:0})},children:Object(O.jsx)("span",{className:"material-icons",children:"add"})})]})}function ce(e){var t,a=Object(n.useState)(!1),r=Object(s.a)(a,2),c=r[0],i=r[1],l=Object(n.useRef)(!1),m=Object(n.useState)(0),b=Object(s.a)(m,2),p=b[0],h=b[1],f=Object(n.useRef)(e.trackList),x=Object(n.useRef)(0),g=Object(n.useRef)(0),v=Object(n.useRef)(0),_=Object(n.useRef)([]),k=Object(n.useRef)(!1),N=Object(n.useRef)();f.current=e.trackList,v.current=e.projectDuration,_.current=e.mediaList,k.current=c;var y=function(e){g.current=e,x.current=performance.now(),h(e),k.current||T(!1)};Object(n.useEffect)((function(){k.current||T(!1)}),[e.trackList]),Object(n.useEffect)((function(){p>e.projectDuration&&y(e.projectDuration)}),[e.projectDuration]);var T=function(){var t=Object(d.a)(Object(u.a)().mark((function t(a){var n,r,c,i,s,o,d,m,b,p,O,y,L,P,C,S,B,E,w,M,F;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=performance.now()-x.current+g.current,a||(n=g.current),n>=v.current&&(n=v.current),h(n),r=Object(j.a)(_.current);try{for(r.s();!(c=r.n()).done;){i=c.value,s=Object(j.a)(i.sources);try{for(s.s();!(o=s.n()).done;)o.value.inUse=!1}catch(D){s.e(D)}finally{s.f()}}}catch(D){r.e(D)}finally{r.f()}for(d=[],m=[],b=!1,p=function(e){for(var t=0;t<f.current[e].length;t++){var a=f.current[e][t];if(n>=a.start&&n<a.start+a.duration){var r=a.media.sources.find((function(t){return t.track===e}));r.inUse=!0;var c=n-a.start+a.mediaStart;(Math.abs(1e3*r.element.currentTime-c)>100||r.element.paused)&&(b=!0),d.push(a),m.push(r.element)}}},O=f.current.length-1;O>=0;O--)p(O);y=Object(j.a)(_.current);try{for(y.s();!(L=y.n()).done;){P=L.value,C=Object(j.a)(P.sources);try{for(C.s();!(S=C.n()).done;)(B=S.value).inUse||(B.element.pause(),B.inUse=!0)}catch(D){C.e(D)}finally{C.f()}}}catch(D){y.e(D)}finally{y.f()}if(!b){t.next=32;break}l.current&&null!=N.current&&N.current.pause(),E=Object(u.a)().mark((function e(t){var a,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d[t],m[t].pause(),r=(n-a.start+a.mediaStart)/1e3,m[t].currentTime===r){e.next=6;break}return e.next=6,new Promise((function(e,a){m[t].onseeked=function(){return e()},m[t].currentTime=r}));case 6:case"end":return e.stop()}}),e)})),w=0;case 17:if(!(w<d.length)){t.next=22;break}return t.delegateYield(E(w),"t0",19);case 19:w++,t.next=17;break;case 22:return t.prev=22,t.next=25,Promise.allSettled(m.map((function(e){return e.play()})));case 25:t.next=29;break;case 27:t.prev=27,t.t1=t.catch(22);case 29:g.current=n,x.current=performance.now(),l.current&&null!=N.current&&N.current.resume();case 32:if(e.renderer.drawSegments(d,m,n),k.current){t.next=37;break}M=Object(j.a)(m);try{for(M.s();!(F=M.n()).done;)F.value.pause()}catch(D){M.e(D)}finally{M.f()}return t.abrupt("return");case 37:if(n!==v.current){t.next=41;break}return R(),l.current&&(null!=N.current&&N.current.stop(),l.current=!1),t.abrupt("return");case 41:setTimeout((function(){T(!0)}),1/e.projectFramerate);case 42:case"end":return t.stop()}}),t,null,[[22,27]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p>=v.current)){e.next=2;break}return e.abrupt("return");case 2:i(!0),g.current=p,x.current=performance.now(),k.current=!0,T(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){i(!1)};function P(e){e.data.size>0&&t.push(e.data)}function C(){var e=new Blob(t,{type:"video/webm"}),a=URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.href=a,n.download="test.webm",n.click(),window.URL.revokeObjectURL(a)}return Object(O.jsx)(B.a,{children:Object(O.jsxs)(S.d,{children:[Object(O.jsx)(S.b,{path:"/export",children:Object(O.jsx)(Z,{Render:function(){var a=e.canvasRef;if(null!=a){var n=a.captureStream(e.projectFramerate);t=[];N.current=new MediaRecorder(n,{mimeType:"video/webm; codecs=vp9"}),N.current.ondataavailable=P,N.current.onstop=C,y(0),l.current=!0,N.current.start(),i(!0),T(!0)}},setCurrentTime:y,trackList:e.trackList,projectDuration:e.projectDuration,currentTime:p,isRecordingRef:l})}),Object(O.jsx)(S.b,{path:"/about",children:Object(O.jsx)(z,{})}),Object(O.jsx)(S.b,{path:"/projects",children:""!=e.projectUser?Object(O.jsx)(re,{projectUser:e.projectUser,projects:e.projects,setProjects:e.setProjects}):Object(O.jsx)(S.a,{to:"/"})}),Object(O.jsx)(S.b,{path:"/editor",children:""!=e.projectUser?Object(O.jsx)(W,Object(o.a)(Object(o.a)({},e),{},{playVideo:L,pauseVideo:R,isPlaying:c,currentTime:p,setCurrentTime:y})):Object(O.jsx)(S.a,{to:"/"})}),Object(O.jsx)(S.b,{path:"/",children:""===e.projectUser?Object(O.jsx)(te,{projectUser:e.projectUser,setProjectUser:e.setProjectUser}):Object(O.jsx)(S.a,{to:"/projects"})})]})})}var ie=a(54),se=a(55),oe=a(33),le=function(){function e(t,a,n){Object(ie.a)(this,e),this.canvas=t,this.projectWidth=a,this.projectHeight=n,this.context=void 0,this.program=void 0,this.positionLocation=void 0,this.texcoordLocation=void 0,this.matrixLocation=void 0,this.textureLocation=void 0,this.positionBuffer=void 0,this.texcoordBuffer=void 0,this.context=t.getContext("webgl"),this.context||console.error("Failed to get webgl context!"),this.program=this.context.createProgram(),this.context.attachShader(this.program,this.loadShader("\n    attribute vec4 a_position;\n    attribute vec2 a_texcoord;\n\n    uniform mat4 u_matrix;\n\n    varying vec2 v_texcoord;\n\n    void main() {\n        gl_Position = u_matrix * a_position;\n        v_texcoord = a_texcoord;\n    }\n",this.context.VERTEX_SHADER)),this.context.attachShader(this.program,this.loadShader("\n    precision mediump float;\n\n    uniform sampler2D u_texture;\n\n    varying vec2 v_texcoord;\n\n    void main() {\n       gl_FragColor = texture2D(u_texture, v_texcoord);\n    }\n",this.context.FRAGMENT_SHADER)),this.context.linkProgram(this.program),this.context.getProgramParameter(this.program,this.context.LINK_STATUS)||(console.error("Error in program linking:"+this.context.getProgramInfoLog(this.program)),this.context.deleteProgram(this.program)),this.context.useProgram(this.program),this.positionLocation=this.context.getAttribLocation(this.program,"a_position"),this.texcoordLocation=this.context.getAttribLocation(this.program,"a_texcoord"),this.matrixLocation=this.context.getUniformLocation(this.program,"u_matrix"),this.textureLocation=this.context.getUniformLocation(this.program,"u_texture"),this.positionBuffer=this.context.createBuffer(),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.positionBuffer);this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array([0,0,1,1,1,0,0,0,0,1,1,1]),this.context.STATIC_DRAW),this.texcoordBuffer=this.context.createBuffer(),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.texcoordBuffer);this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array([0,0,1,1,1,0,0,0,0,1,1,1]),this.context.STATIC_DRAW)}return Object(se.a)(e,[{key:"drawSegments",value:function(e,t,a){this.context.viewport(0,0,this.projectWidth,this.projectHeight),this.context.clear(this.context.COLOR_BUFFER_BIT);for(var n=0;n<e.length;n++)this.drawImage(e[n],t[n],b(e[n],a));this.context.flush()}},{key:"loadShader",value:function(e,t){var a=this.context.createShader(t);if(this.context.shaderSource(a,e),this.context.compileShader(a),!this.context.getShaderParameter(a,this.context.COMPILE_STATUS)){var n=this.context.getShaderInfoLog(a);return console.error("*** Error compiling shader '"+a+"':"+n+"\n"+e.split("\n").map((function(e,t){return"".concat(t+1,": ").concat(e)})).join("\n")),this.context.deleteShader(a),null}return a}},{key:"createTexture",value:function(){var e=this.context.createTexture();return this.context.bindTexture(this.context.TEXTURE_2D,e),this.context.texImage2D(this.context.TEXTURE_2D,0,this.context.RGBA,1,1,0,this.context.RGBA,this.context.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_S,this.context.CLAMP_TO_EDGE),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_T,this.context.CLAMP_TO_EDGE),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MIN_FILTER,this.context.LINEAR),e}},{key:"drawImage",value:function(e,t,a){if(!(a.scaleX<=0||a.scaleY<=0||a.trimLeft+a.trimRight>=1||a.trimTop+a.trimBottom>=1)){this.context.bindTexture(this.context.TEXTURE_2D,e.texture),this.context.texImage2D(this.context.TEXTURE_2D,0,this.context.RGBA,this.context.RGBA,this.context.UNSIGNED_BYTE,t),this.context.useProgram(this.program),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.positionBuffer),this.context.enableVertexAttribArray(this.positionLocation),this.context.vertexAttribPointer(this.positionLocation,2,this.context.FLOAT,!1,0,0),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.texcoordBuffer);var n=[0+a.trimLeft,0+a.trimTop,1-a.trimRight,1-a.trimBottom,1-a.trimRight,0+a.trimTop,0+a.trimLeft,0+a.trimTop,0+a.trimLeft,1-a.trimBottom,1-a.trimRight,1-a.trimBottom];this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array(n),this.context.STATIC_DRAW),this.context.enableVertexAttribArray(this.texcoordLocation),this.context.vertexAttribPointer(this.texcoordLocation,2,this.context.FLOAT,!1,0,0);var r=oe.a.ortho(0,this.context.canvas.width,this.context.canvas.height,0,-1,1),c=t.videoWidth*a.scaleX,i=t.videoHeight*a.scaleY;r=oe.a.translate(r,[this.projectWidth/2+(a.x-c/2)+c*a.trimLeft,this.projectHeight/2+(a.y-i/2)+i*a.trimTop,0,0]),r=oe.a.scale(r,[c*(1-a.trimRight-a.trimLeft),i*(1-a.trimTop-a.trimBottom),0,0]),this.context.uniformMatrix4fv(this.matrixLocation,!1,r),this.context.uniform1i(this.textureLocation,0),this.context.drawArrays(this.context.TRIANGLES,0,6)}}}]),e}();function ue(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)([[]]),m=Object(s.a)(i,2),p=m[0],h=m[1],f=Object(n.useState)(null),x=Object(s.a)(f,2),g=x[0],v=x[1],_=Object(n.useState)(document.createElement("canvas")),k=Object(s.a)(_,2),N=k[0],y=(k[1],Object(n.useState)(new le(N,e.projectWidth,e.projectHeight))),T=Object(s.a)(y,2),L=T[0];T[1];Object(n.useEffect)((function(){N.width=e.projectWidth,N.height=e.projectHeight}),[N,e.projectHeight,e.projectWidth]),Object(n.useEffect)((function(){var t,a=0,n=Object(j.a)(p);try{for(n.s();!(t=n.n()).done;){var r=t.value;0!==r.length&&(a=Math.max(a,r[r.length-1].start+r[r.length-1].duration))}}catch(c){n.e(c)}finally{n.f()}e.setProjectDuration(a)}),[p]);var R=document.createElement("canvas"),P=R.getContext("2d"),C=function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var a,n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=document.createElement("video")).preload="auto",e.next=4,new Promise((function(e,n){a.onloadeddata=function(){return e()},a.src=URL.createObjectURL(t),a.currentTime=1e-4}));case 4:return R.width=a.videoWidth,R.height=a.videoHeight,P.drawImage(a,0,0,a.videoWidth,a.videoHeight),n={sources:[{track:0,element:a,inUse:!1}],file:t,thumbnail:R.toDataURL()},e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var a,n,i,s,o,d,m,b,p,h;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=!1,i=Object(j.a)(t),e.prev=3,i.s();case 5:if((s=i.n()).done){e.next=20;break}o=s.value,d=0;case 8:if(!(d<r.length)){e.next=15;break}if(r[d].file.name!==o.name){e.next=12;break}return n=!0,e.abrupt("break",15);case 12:d++,e.next=8;break;case 15:if(!n){e.next=17;break}return e.abrupt("continue",18);case 17:a.push(o);case 18:e.next=5;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:m=[],b=0,p=a;case 30:if(!(b<p.length)){e.next=40;break}return h=p[b],e.t1=m,e.next=35,C(h);case 35:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 37:b++,e.next=30;break;case 40:return c([].concat(Object(l.a)(r),m)),console.log("Sucessfully Loaded Segment Thumbnail!"),e.abrupt("return");case 43:case"end":return e.stop()}}),e,null,[[3,22,25,28]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(ce,Object(o.a)(Object(o.a)({},e),{},{canvasRef:N,mediaList:r,setMediaList:c,trackList:p,setTrackList:h,addVideo:S,deleteVideo:function(e){var t,a=Object(j.a)(e.sources);try{for(a.s();!(t=a.n()).done;){t.value.element.pause()}}catch(i){a.e(i)}finally{a.f()}g&&p[g.track][g.index].media===e&&v(null),c(r.filter((function(t){return t!==e})));for(var n=p.map((function(t){return t.filter((function(t){return t.media!==e}))}));n.length>0&&0===n[n.length-1].length;)n.pop();n.push([]),h(n)},deleteSelectedSegment:function(){if(null!==g){var e,t=Object(j.a)(p[g.track][g.index].media.sources);try{for(t.s();!(e=t.n()).done;){e.value.element.pause()}}catch(n){t.e(n)}finally{t.f()}for(var a=[].concat(Object(l.a)(p.slice(0,g.track)),[[].concat(Object(l.a)(p[g.track].slice(0,g.index)),Object(l.a)(p[g.track].slice(g.index+1)))],Object(l.a)(p.slice(g.track+1)));a.length>0&&0===a[a.length-1].length;)a.pop();a.push([]),h(a),v(null)}},renderer:L,dragAndDrop:function(e){if(null!=L){var t={media:e,start:0,duration:1e3*e.sources[0].element.duration,mediaStart:0,texture:L.createTexture(),keyframes:[{start:0,x:0,y:0,trimRight:0,trimLeft:0,trimTop:0,trimBottom:0,scaleX:1,scaleY:1}]},a=e.sources[0].element.cloneNode();a.pause(),0===p[p.length-1].length?(e.sources.find((function(e){return e.track===p.length-1}))||e.sources.push({track:p.length-1,element:a,inUse:!1}),h([].concat(Object(l.a)(p.slice(0,p.length-1)),[[t],[]]))):(e.sources.push({track:p.length,element:a,inUse:!1}),h([].concat(Object(l.a)(p),[[t],[]])))}},selectedSegment:g,setSelectedSegment:v,updateSegment:function(e,t){h([].concat(Object(l.a)(p.slice(0,e.track)),[[].concat(Object(l.a)(p[e.track].slice(0,e.index)),[t],Object(l.a)(p[e.track].slice(e.index+1)))],Object(l.a)(p.slice(e.track+1))))},splitVideo:function(t){if(null!==g){var a=p[g.track][g.index];if(!(a.start>t||a.start+a.duration<t)){for(var n=t-a.start,r=a.keyframes.length,c=0,i=1;i<r;i++){if(a.keyframes[i].start>n)break;c=i}for(var s=b(a,t),u=a.keyframes.slice(0,c+1),d=a.keyframes.slice(c+1,r),j=0;j<d.length;j++)d[j].start-=n;var m=Object(o.a)(Object(o.a)({},s),{},{start:n-1/e.projectFramerate});u.push(m),h([].concat(Object(l.a)(p.slice(0,g.track)),[[].concat(Object(l.a)(p[g.track].slice(0,g.index)),[Object(o.a)(Object(o.a)({},p[g.track][g.index]),{},{duration:t-a.start,keyframes:u}),{media:a.media,start:t,duration:a.start+a.duration-t,mediaStart:t-a.start+a.mediaStart,texture:a.texture,keyframes:[s].concat(d)}],Object(l.a)(p[g.track].slice(g.index+1)))],Object(l.a)(p.slice(g.track+1))))}}}}))}function de(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(0),i=Object(s.a)(c,2),o=i[0],l=(i[1],Object(n.useState)("")),u=Object(s.a)(l,2),d=u[0],j=u[1],m=Object(n.useState)(""),b=Object(s.a)(m,2),p=b[0],h=b[1],f=Object(n.useState)(""),x=Object(s.a)(f,2),g=x[0],v=x[1],_=Object(n.useState)(1920),k=Object(s.a)(_,2),N=k[0],y=k[1],T=Object(n.useState)(1080),L=Object(s.a)(T,2),R=L[0],P=L[1],C=Object(n.useState)(30),S=Object(s.a)(C,2),B=S[0],E=S[1],w=Object(n.useState)(0),M=Object(s.a)(w,2),F=M[0],I=M[1];return Object(n.useEffect)((function(){o>=a.length||(h(a[o]._id),v(a[o].name),y(a[o].width),P(a[o].height),E(a[o].framerate),I(a[o].duration))}),[o,a]),Object(n.useEffect)((function(){null!=sessionStorage.getItem("token")&&D.get("/getEmail").then((function(e){j(e.data.email)}))}),[]),Object(n.useEffect)((function(){""!==d&&D.get("/getProjects").then((function(e){r(e.data)}))}),[d]),Object(O.jsx)(ue,{projectUser:d,setProjectUser:j,projectHeight:R,setProjectHeight:P,projectWidth:N,setProjectWidth:y,projectFramerate:B,setProjectFramerate:E,projectName:g,setProjectName:v,projectId:p,setProjectId:h,projectDuration:F,setProjectDuration:I,projects:a,setProjects:r})}var je=function(){return Object(O.jsx)(de,{})},me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,91)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(je,{})}),document.getElementById("root")),me()}},[[90,1,2]]]);
//# sourceMappingURL=main.c306d16d.chunk.js.map